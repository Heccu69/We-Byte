# Исправления: Торт для тараканов и коржи сквозь стены

## Проблема 1: UnassignedReferenceException в EnemyMove

### Решение
Скрипт `EnemyMove.cs` теперь автоматически находит торт при старте.

### Настройка в Unity:

1. **Добавьте тег "Cake" к объекту торта:**
   - Выберите объект торта в Hierarchy
   - В Inspector найдите поле **Tag** (вверху)
   - Если тега "Cake" нет в списке:
     - Выберите **Add Tag...**
     - Нажмите **+**
     - Введите **"Cake"**
     - Сохраните
   - Вернитесь к объекту торта и установите тег **"Cake"**

2. **Проверка:**
   - Запустите игру
   - В консоли должно появиться: `"Таракан нашел торт: [имя объекта]"`
   - Если появляется предупреждение `"Торт не найден!"`, проверьте тег торта

### Альтернативный способ (ручное назначение):
Если не хотите использовать теги:
1. Выберите префаб таракана в Assets
2. В Inspector найдите компонент **Enemy Move**
3. Перетащите объект торта из Hierarchy в поле **Cake**

---

## Проблема 2: Невидимые стены для карты

### Решение
Создан компонент `InvisibleWalls.cs`, который автоматически создает невидимые стены вокруг карты.

### Как это работает:

1. **Что блокируется стенами:**
   - ✅ Игрок (Player)
   - ✅ Враги (Enemy/Таракан)
   - ✅ Коржи (объекты с тегом "ConveyorObject")
   - ✅ Все физические объекты

### Проверка:

1. Запустите игру
2. Попробуйте выйти за границу игроком - должна быть стена
3. Коржи также будут блокироваться стенами

### Настройка размера стен:

1. Выберите объект **MapBounds** в Hierarchy
2. В Inspector настройте:
   - **Map Width**: ширина карты
   - **Map Height**: высота карты
   - **Wall Thickness**: толщина стен

### Если нужно, чтобы коржи проходили сквозь стены:

**Вариант: Настройка слоёв (рекомендуется)**

1. Создайте слои:
   - **Edit → Project Settings → Tags and Layers**
   - В разделе **Layers** добавьте:
     - Layer 8: **"Walls"**
     - Layer 9: **"Korzh"**

2. Настройте коллизии:
   - **Edit → Project Settings → Physics 2D**
   - В **Layer Collision Matrix** снимите галочку между:
     - **Walls** и **Korzh**

3. Назначьте слои:
   - В `InvisibleWalls.cs` измените `wallLayer` на **"Walls"**
   - Коржам назначьте Layer **"Korzh"**

---

## Дополнительные настройки

### Визуализация границ:

- Выберите объект **MapBounds** в Hierarchy
- В Scene View появятся **красные линии** - границы карты
- Это помогает настроить размер стен правильно

---

## Отладка

### Консольные сообщения:

**EnemyMove:**
- ✅ `"Таракан нашел торт: [имя]"` - всё работает
- ⚠️ `"Торт не найден!"` - проверьте тег "Cake"

**InvisibleWalls:**
- ✅ `"Невидимые стены созданы вокруг карты [размер]"` - стены созданы

### Проверка в игре:

1. **Тараканы идут к торту:**
   - Запустите игру
   - Создайте таракана (через спавнер)
   - Таракан должен двигаться к торту

2. **Стены блокируют объекты:**
   - Попробуйте выйти за границу игроком - должна быть стена
   - Коржи также блокируются стенами
   - Тараканы блокируются стенами

---

## Краткая сводка изменений

### Файлы:
1. **EnemyMove.cs** - автопоиск торта по тегу "Cake", исправлен поворот, увеличена гравитация
2. **EnemySpawner.cs** - настройка физики тараканов при спавне
3. **InvisibleWalls.cs** - создание невидимых стен вокруг карты

### Требования:
- ✅ Торт должен иметь тег **"Cake"**

### Поведение:
- ✅ Все объекты (игрок, враги, коржи) блокируются стенами
- ✅ Стены невидимые, но имеют физическую коллизию
- ✅ Тараканы спавнятся лицом к торту
- ✅ Тараканы быстро падают (gravityScale = 3)
