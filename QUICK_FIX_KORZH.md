# Быстрое решение: CakeManager не находит коржи

## Проблема
В консоли пишет:
```
=== Начинаем автоматический сбор коржей ===
Найдено объектов PickupObject: 0
=== CakeManager собрал 0 коржей ===
```

## Причина
Коржи, созданные конвейером, **не имеют компонента PickupObject**.

---

## Решение 1: Добавить PickupObject к префабу коржа (рекомендуется)

### Шаг 1: Найдите префаб коржа
1. В Unity найдите папку с префабами (обычно **Assets/Prefabs** или **Assets**)
2. Найдите префаб коржа (объект, который используется в ConveyorSpawner)

### Шаг 2: Добавьте компонент PickupObject
1. Выберите префаб коржа
2. В Inspector нажмите **Add Component**
3. Найдите и добавьте **Pickup Object**
4. Настройте:
   - **Object Type**: **Korzh**
   - **Object Name**: "Корж"

### Шаг 3: Сохраните префаб
1. Нажмите **Ctrl+S** или **File → Save**
2. Префаб обновлен!

### Шаг 4: Перезапустите игру
1. Остановите игру (если запущена)
2. Запустите снова
3. Новые коржи будут иметь PickupObject

---

## Решение 2: Код автоматически добавит PickupObject (уже сделано)

Обновленный код `ConveyorSpawner.cs` автоматически добавляет компонент PickupObject к каждому новому коржу.

### Проверка:
1. Запустите игру
2. В консоли должно появиться:
   ```
   Добавлен компонент PickupObject к коржу [имя]
   ```

### Если сообщение не появляется:
- Код не обновился
- Перезапустите Unity
- Проверьте, что файл `ConveyorSpawner.cs` сохранен

---

## Решение 3: Обновить список коржей вручную

Если коржи уже лежат на тарелке, но CakeManager их не видит:

### Вариант A: Подождите 2 секунды
CakeManager автоматически пересканирует область каждые 2 секунды.

### Вариант B: Вызовите обновление вручную (через код)
```csharp
CakeManager cakeManager = FindObjectOfType<CakeManager>();
cakeManager.UpdateCakeLayers();
```

---

## Проверка работы

### 1. Запустите игру
### 2. Посмотрите в консоль Unity

Должны появиться сообщения:

```
=== Начинаем автоматический сбор коржей ===
Найдено объектов PickupObject: 5
Проверяем объект: Korzh_1, тип: Korzh
  ✗ Корж Korzh_1 на конвейере (связан с платформой) - пропускаем
Проверяем объект: Korzh_2, тип: Korzh
  ✗ Корж Korzh_2 движется (скорость 2.50) - пропускаем
Проверяем объект: Korzh_3, тип: Korzh
  - Корж Korzh_3 на расстоянии 0.50 от тарелки
  ✓ Корж Korzh_3 добавлен в список!
Проверяем объект: Korzh_4, тип: Korzh
  - Корж Korzh_4 на расстоянии 1.20 от тарелки
  ✓ Корж Korzh_4 добавлен в список!
=== CakeManager собрал 2 коржей ===
```

**Важно:** CakeManager пропускает коржи, которые:
- ✗ На конвейере (связаны с платформой)
- ✗ Движутся (скорость > 0.1)
- ✗ В руках игрока

Собираются только коржи, которые:
- ✅ Лежат на тарелке
- ✅ Не движутся
- ✅ Не связаны с платформой

### 3. Создайте таракана

Таракан должен подойти к тарелке, и в консоли появится:
```
Таракан добавлен в очередь. Всего тараканов: 1
Тараканы утаскивают корж! Скорость: 0.5 (тараканов: 1)
```

---

## Если все равно не работает

### Проверьте префаб коржа:
1. Найдите префаб в Assets
2. Выберите его
3. В Inspector должны быть компоненты:
   - ✅ **Sprite Renderer**
   - ✅ **Rigidbody 2D**
   - ✅ **Box Collider 2D**
   - ✅ **Pickup Object** (Object Type: Korzh)

### Проверьте ConveyorSpawner:
1. Выберите объект ConveyorSpawner в Hierarchy
2. В Inspector найдите поле **Korzh Prefab**
3. Убедитесь, что там назначен правильный префаб

### Проверьте CakeManager:
1. Выберите объект CakeManager в Hierarchy
2. В Inspector проверьте:
   - **Under Cake Plate**: должна быть назначена тарелка UnderCake
   - **Cake Layers**: может быть пустым (заполнится автоматически)

---

## Краткая инструкция

1. ✅ Добавьте **PickupObject** к префабу коржа
2. ✅ Установите **Object Type = Korzh**
3. ✅ Перезапустите игру
4. ✅ Проверьте консоль - должно быть найдено коржей > 0

**Радиус поиска:** коржи в пределах **9 единиц** от тарелки будут найдены.

Готово! Теперь CakeManager найдет коржи, и тараканы смогут их утаскивать.
